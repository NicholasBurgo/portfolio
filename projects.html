<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Projects - Nicholas Burgo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, #1a0f2e 0%, #2d1b69 25%, #4c1d95 50%, #7c3aed 75%, #2d1b69 100%);
        color: #f3f4f6;
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }
      
      /* Galaxy nebula background */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          radial-gradient(ellipse at 15% 20%, rgba(139, 92, 246, 0.3) 0%, transparent 60%),
          radial-gradient(ellipse at 85% 80%, rgba(79, 195, 247, 0.25) 0%, transparent 50%),
          radial-gradient(ellipse at 60% 40%, rgba(236, 72, 153, 0.2) 0%, transparent 70%),
          radial-gradient(ellipse at 30% 70%, rgba(59, 130, 246, 0.15) 0%, transparent 40%);
        z-index: -1;
        animation: nebulaShift 25s ease-in-out infinite;
      }
      
      @keyframes nebulaShift {
        0%, 100% { 
          opacity: 0.7;
          transform: scale(1) rotate(0deg);
        }
        33% { 
          opacity: 0.9;
          transform: scale(1.05) rotate(1deg);
        }
        66% { 
          opacity: 0.8;
          transform: scale(0.98) rotate(-0.5deg);
        }
      }
      html { scroll-behavior: smooth; }

      /* Improved project card animations */
      @keyframes flyInRight {
        0% {
          opacity: 0;
          transform: translateX(120px) scale(0.9);
        }
        80% {
          opacity: 1;
          transform: translateX(-8px) scale(1.02);
        }
        100% {
          opacity: 1;
          transform: translateX(0) scale(1);
        }
      }
      .fly-hidden {
        opacity: 0;
        transform: translateX(120px) scale(0.9);
        transition: none;
      }
      .fly-in {
        animation: flyInRight 1.2s cubic-bezier(0.23, 1, 0.32, 1) forwards;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in-down {
        animation: fadeInDown 0.8s ease-out forwards;
      }

      /* Enhanced project cards */
      .project-card {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(79, 195, 247, 0.3);
        transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      .project-card:hover {
        transform: translateY(-8px) scale(1.02);
        background: rgba(255, 255, 255, 0.12);
        border-color: rgba(79, 195, 247, 0.6);
        box-shadow: 0 20px 40px rgba(79, 195, 247, 0.15);
      }

      /* Fixed modal overlay with proper transparency */
      .modal-overlay {
        background: rgba(0, 0, 0, 0.7) !important;
        backdrop-filter: blur(8px) !important;
        -webkit-backdrop-filter: blur(8px) !important;
      }

      /* Improved modal glass effect */
      .modal-glass {
        background: rgba(15, 20, 25, 0.95) !important;
        backdrop-filter: blur(30px) saturate(1.5) !important;
        -webkit-backdrop-filter: blur(30px) saturate(1.5) !important;
        border: 2px solid rgba(79, 195, 247, 0.3) !important;
        box-shadow: 
          0 25px 50px rgba(0, 0, 0, 0.5),
          0 0 0 1px rgba(255, 255, 255, 0.1) inset,
          0 2px 4px rgba(79, 195, 247, 0.1) inset !important;
      }

      /* Enhanced close button */
      .close-btn {
        position: absolute;
        top: 16px;
        right: 16px;
        width: 40px;
        height: 40px;
        background: rgba(220, 38, 38, 0.9) !important;
        color: white !important;
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }
      .close-btn:hover {
        background: rgba(220, 38, 38, 1) !important;
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
      }

      /* Modal content improvements */
      .modal-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 24px 0;
      }
      .modal-gallery img {
        width: 100%;
        max-width: 300px;
        max-height: 180px;
        object-fit: cover;
        border-radius: 16px;
        border: 2px solid rgba(79, 195, 247, 0.3);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        background: rgba(16, 24, 32, 0.8);
      }
      .modal-gallery img:hover {
        transform: scale(1.05) translateY(-4px);
        border-color: rgba(79, 195, 247, 0.8);
        box-shadow: 0 15px 35px rgba(79, 195, 247, 0.2);
      }

      /* Enhanced image viewer */
      .image-viewer {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.95) !important;
        backdrop-filter: blur(10px) !important;
        z-index: 200;
        align-items: center;
        justify-content: center;
        transition: opacity 0.3s ease;
      }
      .image-viewer.active {
        display: flex;
        opacity: 1;
      }
      .image-viewer img {
        max-width: 90vw;
        max-height: 85vh;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        background: rgba(16, 24, 32, 0.9);
      }

      /* Improved tech tags */
      .tech-tag {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.9) 0%, rgba(79, 195, 247, 0.8) 100%) !important;
        color: white !important;
        font-weight: 700;
        border-radius: 25px;
        padding: 8px 16px;
        font-size: 14px;
        border: 1px solid rgba(147, 197, 253, 0.4);
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        transition: all 0.3s ease;
      }
      .tech-tag:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
      }

      /* Navigation improvements */
      nav {
        background: rgba(255, 255, 255, 0.1) !important;
        backdrop-filter: blur(20px) !important;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      /* Content section improvements */
      .content-section {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(79, 195, 247, 0.2);
        border-radius: 20px;
        padding: 32px;
        margin: 20px 0;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      }

      /* Modal animations */
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: scale(0.9) translateY(50px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }
      .modal-animate {
        animation: modalSlideIn 0.4s cubic-bezier(0.23, 1, 0.32, 1) forwards;
      }

      @media (max-width: 768px) {
        .modal-glass {
          margin: 20px;
          max-height: 90vh;
        }
        .close-btn {
          top: 12px;
          right: 12px;
          width: 36px;
          height: 36px;
          font-size: 16px;
        }
        .content-section {
          padding: 20px;
          margin: 10px 0;
        }
      }
    </style>
  </head>
  <body class="relative overflow-x-hidden">
    <!-- 3D Particle Background -->
    <canvas id="galaxy-particles" style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none;"></canvas>
    
    <!-- Galaxy background with constellation patterns -->
    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; pointer-events: none; opacity: 0.3;">
      <!-- Constellation lines -->
      <svg width="100%" height="100%" style="position: absolute;">
        <defs>
          <filter id="glow">
            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
            <feMerge> 
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <g stroke="#8b5cf6" stroke-width="1" fill="none" opacity="0.4" filter="url(#glow)">
          <line x1="15%" y1="25%" x2="30%" y2="35%" stroke-dasharray="2,4" class="constellation-line"/>
          <line x1="30%" y1="35%" x2="45%" y2="30%" stroke-dasharray="2,4" class="constellation-line"/>
          <line x1="65%" y1="20%" x2="80%" y2="40%" stroke-dasharray="2,4" class="constellation-line"/>
          <line x1="20%" y1="65%" x2="35%" y2="75%" stroke-dasharray="2,4" class="constellation-line"/>
          <line x1="55%" y1="70%" x2="75%" y2="80%" stroke-dasharray="2,4" class="constellation-line"/>
        </g>
      </svg>
    </div>
    
    <style>
      .constellation-line {
        animation: constellationPulse 6s ease-in-out infinite;
      }
      .constellation-line:nth-child(2) { animation-delay: 1s; }
      .constellation-line:nth-child(3) { animation-delay: 2s; }
      .constellation-line:nth-child(4) { animation-delay: 3s; }
      .constellation-line:nth-child(5) { animation-delay: 4s; }
      
      @keyframes constellationPulse {
        0%, 100% { opacity: 0.3; stroke-width: 1; }
        50% { opacity: 0.7; stroke-width: 1.5; }
      }
    </style>

    <!-- Enhanced Header/Nav -->
    <header class="fixed top-0 left-0 w-full z-50 px-6 py-4 flex items-center justify-center animate-fade-in-down">
      <nav class="flex items-center justify-between gap-8 text-md font-bold text-white/90 rounded-full px-8 py-3 shadow-xl min-w-[340px] w-auto max-w-2xl">
        <div class="flex gap-8">
          <a href="index.html" class="hover:text-blue-300 transition-all duration-300 hover:scale-105">Home</a>
          <a href="projects.html" class="text-blue-300 scale-105">Projects</a>
          <a href="about.html" class="hover:text-blue-300 transition-all duration-300 hover:scale-105">About me & Contact</a>
        </div>
        <div class="flex gap-4 text-lg">
          <a href="https://github.com/NicholasBurgo" target="_blank" class="hover:text-blue-400 transition-all duration-300 hover:scale-110"><i class="fab fa-github"></i></a>
          <a href="https://www.linkedin.com/in/nicholas-burgo/" target="_blank" class="hover:text-blue-400 transition-all duration-300 hover:scale-110"><i class="fab fa-linkedin"></i></a>
          <a href="mailto:nicholas.burgo@selu.edu" class="hover:text-blue-400 transition-all duration-300 hover:scale-110"><i class="fas fa-envelope"></i></a>
        </div>
      </nav>
    </header>

    <!-- Enhanced Projects section -->
    <section id="projects" class="section-bg projects-bg min-h-screen px-6 pt-28 pb-32 relative z-10">
      <div class="max-w-7xl mx-auto">
        <h3 class="text-4xl font-extrabold mb-12 text-center bg-gradient-to-r from-blue-300 to-blue-500 bg-clip-text text-transparent animate-fade-in-down">
          My Latest Projects
        </h3>
        <p class="text-xl text-white/80 text-center mb-16 max-w-3xl mx-auto leading-relaxed">
          Click on any project to explore detailed information, screenshots, and technical implementations
        </p>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8" id="projects-grid">
          <!-- Enhanced Project cards -->
          <div onclick="openProjectModal(0)" class="project-card p-6 rounded-3xl cursor-pointer fly-hidden">
            <img src="images/fable.png" alt="Fable Market" class="w-full h-48 object-cover rounded-2xl mb-6 border border-white/10" />
            <h3 class="text-2xl font-extrabold text-white mb-3">Fable Market</h3>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="bg-green-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">Completed</span>
              <span class="bg-blue-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">Software Engineering</span>
          </div>
            <p class="text-white/80 text-sm leading-relaxed">
            A comprehensive book marketplace with features for buying books, reviews, and search filtering.
          </p>
        </div>

          <div onclick="openProjectModal(1)" class="project-card p-6 rounded-3xl cursor-pointer fly-hidden">
            <img src="images/car-dealership.jpg" alt="Car Dealership Database" class="w-full h-48 object-cover rounded-2xl mb-6 border border-white/10" />
            <h3 class="text-2xl font-extrabold text-white mb-3">Car Dealership Database</h3>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="bg-green-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">Completed</span>
              <span class="bg-blue-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">Database Systems</span>
          </div>
            <p class="text-white/80 text-sm leading-relaxed">
            Architected a 5-table relational database system for car-rental operations with ER modeling and SQL implementation.
          </p>
        </div>

          <div onclick="openProjectModal(2)" class="project-card p-6 rounded-3xl cursor-pointer fly-hidden">
            <img src="images/vr.jpg" alt="CityRift VR" class="w-full h-48 object-cover rounded-2xl mb-6 border border-white/10" />
            <h3 class="text-2xl font-extrabold text-white mb-3">CityRift VR</h3>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="bg-yellow-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">In Progress</span>
              <span class="bg-purple-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">Innovation Hub</span>
          </div>
            <p class="text-white/80 text-sm leading-relaxed">
            VR sandbox in Unity with first-person mechanics, AI-driven world, and immersive simulation.
          </p>
        </div>

          <div onclick="openProjectModal(3)" class="project-card p-6 rounded-3xl cursor-pointer fly-hidden">
            <img src="images/lua.jpg" alt="Lua Multiplayer Networking" class="w-full h-48 object-cover rounded-2xl mb-6 border border-white/10" />
            <h3 class="text-2xl font-extrabold text-white mb-3">Lua Multiplayer Networking</h3>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="bg-green-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">Completed</span>
              <span class="bg-indigo-600 text-white text-xs px-3 py-2 rounded-full font-semibold shadow-lg">Survey Programming</span>
          </div>
            <p class="text-white/80 text-sm leading-relaxed">
            Local multiplayer mini-games using Lua with host-client architecture and real-time interactions.
          </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Enhanced Modal for project details -->
    <div id="project-modal-overlay" class="fixed inset-0 modal-overlay z-50 flex items-center justify-center hidden">
      <div id="project-modal-glass" class="modal-glass rounded-3xl shadow-2xl max-w-4xl w-full mx-4 p-0 relative max-h-[90vh] overflow-y-auto modal-animate"
           onclick="event.stopPropagation();">
        <button id="modal-close-btn" class="close-btn">
          <i class="fa-solid fa-xmark"></i>
        </button>
        <div id="project-modal-body" class="px-8 pt-12 pb-8">
          <!-- Modal content will be injected here -->
        </div>
      </div>
    </div>

    <!-- Enhanced Image viewer -->
    <div id="image-viewer" class="image-viewer">
      <button id="image-viewer-close" class="absolute top-6 right-6 text-white text-3xl z-10 bg-red-600 rounded-full p-3 hover:bg-red-700 transition-all duration-300 hover:scale-110">
        <i class="fa-solid fa-xmark"></i>
      </button>
      <button id="viewer-prev" class="absolute left-6 top-1/2 -translate-y-1/2 text-white text-3xl z-10 bg-black/60 rounded-full p-3 hover:bg-blue-500/80 transition-all duration-300" style="display:none;">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <img id="viewer-image" src="" alt="Full size image" />
      <button id="viewer-next" class="absolute right-6 top-1/2 -translate-y-1/2 text-white text-3xl z-10 bg-black/60 rounded-full p-3 hover:bg-blue-500/80 transition-all duration-300" style="display:none;">
        <i class="fa-solid fa-chevron-right"></i>
      </button>
    </div>

    <script>
      // Enhanced project card animations
      function animateProjectCardsFlyIn() {
        const cards = document.querySelectorAll('.project-card');
        cards.forEach((card, i) => {
          setTimeout(() => {
            card.classList.remove('fly-hidden');
            card.classList.add('fly-in');
          }, 200 * i);
        });
      }

      // Use Intersection Observer to trigger when projects section is in view
      const projectsSection = document.getElementById('projects');
      let flyAnimated = false;
      if (projectsSection) {
        const observer = new window.IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting && !flyAnimated) {
              animateProjectCardsFlyIn();
              flyAnimated = true;
            }
          });
        }, { threshold: 0.2 });
        observer.observe(projectsSection);
      }

      // Project data for modal
      const projectData = [
        {
          title: "Fable Market",
          tech: ["React", "TypeScript", "C#"],
          desc: "A comprehensive book marketplace platform with features for purchasing books, leaving reviews, and creating personalized book lists with advanced search functionality.",
          longDesc: `<b>Role:</b> Team Leader, Full Stack Developer<br>
            <b>Problem:</b> Need for a comprehensive platform where users can discover, purchase, and review books with personalized features.<br>
            <b>Solution:</b> Developed a full-featured book marketplace with advanced search capabilities, user reviews, and personalized book lists to enhance the book discovery experience.<br>
            <b>Key Features:</b> Advanced search functionality by title, author, and genre using optimized string comparison queries, integrated database management for efficient data operations, user review system, and personalized book list creation with data integrity enforcement.`,
          images: [
            "images/fableMarket2.png",
            "images/fable-search.jpg",
            "images/fable-search2.jpg",
          ],
          links: [],
        },
        {
          title: "Car Dealership Database",
          tech: ["SQL", "Database Management"],
          desc: "Architected a comprehensive 5-table relational database system for car-rental operations with full ER-diagram modeling and SQL implementation.",
          longDesc: `<b>Role:</b> Team Leader, Database Architect<br>
            <b>Problem:</b> Need for a robust relational database system to manage complex car-rental operations with proper data integrity.<br>
            <b>Solution:</b> Designed and implemented a normalized 5-table database schema following 3NF principles with comprehensive ER-diagram modeling and SQL DDL implementation.<br>
            <b>Key Features:</b> Fully annotated ER-diagram with min/max participation constraints, SQL DDL with primary/foreign-key enforcement and cascading rules, seeded database with 100+ realistic records using bulk-load scripts, traceable BO&R documentation linking business requirements to database structure, and FK-mapping matrix for team collaboration.`,
          images: [],
          links: [
            {
              type: "github",
              url: "https://github.com/NicholasBurgo/Car-Dealership",
            },
          ],
        },
        {
          title: "CityRift VR",
          tech: ["C#", "Unity", "Blender"],
          desc: "End-to-end virtual reality sandbox built in Unity combining first-person weapon mechanics with AI-driven open world environments.",
          longDesc: `<b>Role:</b> Game Developer, VR Specialist<br>
            <b>Problem:</b> Creating an immersive VR experience that combines realistic weapon mechanics with intelligent AI behavior in an open world.<br>
            <b>Solution:</b> Built a comprehensive VR sandbox using Unity with C# comprising 90% of the codebase, featuring advanced VR-rig locomotion, ray-cast gun mechanics, and autonomous AI systems.<br>
            <b>Key Features:</b> VR-rig locomotion system with comfortable movement, ray-cast gun logic with realistic weapon mechanics, enemy/pedestrian state machines with reactive AI behavior, autonomous traffic system with lane-following rules, explorable streetscape environment, multiplatform builds with IL2CPP + Burst optimization, and comprehensive version control with clean collaboration setup.`,
          images: [
            "images/vr-shooter2.jpg",
          ],
          links: [
            {
              type: "github",
              url: "https://github.com/NicholasBurgo/VrShooter",
            },
          ],
        },
        {
          title: "Lua Multiplayer Networking",
          tech: ["Lua", "Love Engine"],
          desc: "Engaging local multiplayer mini-games built with Lua using host-client architecture for seamless real-time player interactions.",
          longDesc: `<b>Role:</b> Game Developer, Network Programmer<br>
            <b>Problem:</b> Creating engaging multiplayer experiences with real-time communication and seamless player interactions.<br>
            <b>Solution:</b> Developed local multiplayer mini-games using Lua and Love Engine with robust host-client networking architecture for dynamic player interactions.<br>
            <b>Key Features:</b> Host-client architecture for reliable multiplayer connections, real-time communication system enabling dynamic player interactions, multiple mini-game modes with engaging gameplay mechanics, and optimized networking code for smooth multiplayer experience.`,
          images: [
            "images/lua-multiplayer2.jpg",
            "images/lua-networking.jpg",
            "images/lua-games.jpg",
            "images/lua-games2.jpg"
          ],
          links: [],
        },
      ];

      // Enhanced modal functions
      function closeProjectModal() {
        const overlay = document.getElementById("project-modal-overlay");
        const modal = document.getElementById("project-modal-glass");
        
        modal.style.transform = "scale(0.9) translateY(50px)";
        modal.style.opacity = "0";
        
        setTimeout(() => {
          overlay.classList.add("hidden");
        document.body.style.overflow = "";
        }, 200);
      }

      // Image viewer variables
      let currentImageIdx = 0;
      let currentImageList = [];

      function openImageViewer(imageSrc, imgIdx = 0, imgList = []) {
        const viewer = document.getElementById('image-viewer');
        const image = document.getElementById('viewer-image');
        image.src = imageSrc;
        viewer.classList.add('active');
        document.body.style.overflow = 'hidden';
        currentImageIdx = imgIdx;
        currentImageList = imgList;
        updateViewerArrows();
      }

      function closeImageViewer() {
        const viewer = document.getElementById('image-viewer');
        viewer.classList.remove('active');
        document.body.style.overflow = '';
      }

      function updateViewerArrows() {
        const prevBtn = document.getElementById('viewer-prev');
        const nextBtn = document.getElementById('viewer-next');
        prevBtn.style.display = (currentImageList.length > 1 && currentImageIdx > 0) ? 'block' : 'none';
        nextBtn.style.display = (currentImageList.length > 1 && currentImageIdx < currentImageList.length - 1) ? 'block' : 'none';
      }

      // Enhanced event listeners
      document.getElementById('modal-close-btn').addEventListener('click', function(e) {
        e.stopPropagation();
        closeProjectModal();
      });

      document.getElementById('image-viewer-close').addEventListener('click', function(e) {
        e.stopPropagation();
        closeImageViewer();
      });

      document.getElementById('image-viewer').addEventListener('click', function(e) {
        if (e.target === this) {
          closeImageViewer();
        }
      });

      document.getElementById('project-modal-overlay').addEventListener('click', function(e) {
        if (e.target === this) {
          closeProjectModal();
        }
      });

      // Arrow navigation for image viewer
      document.getElementById('viewer-prev').addEventListener('click', function(e) {
        e.stopPropagation();
        if (currentImageIdx > 0) {
          currentImageIdx--;
          document.getElementById('viewer-image').src = currentImageList[currentImageIdx];
          updateViewerArrows();
        }
      });

      document.getElementById('viewer-next').addEventListener('click', function(e) {
        e.stopPropagation();
        if (currentImageIdx < currentImageList.length - 1) {
          currentImageIdx++;
          document.getElementById('viewer-image').src = currentImageList[currentImageIdx];
          updateViewerArrows();
        }
      });

      // Keyboard navigation
      document.addEventListener('keydown', function(e) {
        if (document.getElementById('image-viewer').classList.contains('active')) {
          if (e.key === 'Escape') {
            closeImageViewer();
          } else if (e.key === 'ArrowLeft' && currentImageIdx > 0) {
          currentImageIdx--;
          document.getElementById('viewer-image').src = currentImageList[currentImageIdx];
          updateViewerArrows();
        } else if (e.key === 'ArrowRight' && currentImageIdx < currentImageList.length - 1) {
          currentImageIdx++;
          document.getElementById('viewer-image').src = currentImageList[currentImageIdx];
          updateViewerArrows();
          }
        } else if (!document.getElementById('project-modal-overlay').classList.contains('hidden')) {
          if (e.key === 'Escape') {
            closeProjectModal();
          }
        }
      });

      function openProjectModal(idx) {
        const overlay = document.getElementById('project-modal-overlay');
        const modal = document.getElementById('project-modal-glass');
        const body = document.getElementById('project-modal-body');
        const data = projectData[idx];
        
        if (!body) return;

        const techHTML = data.tech
              .map(t => `<span class="tech-tag">${t}</span>`)
              .join('');

        const linksHTML = data.links
              .map(link =>
                link.type === 'github'
                  ? `<a href="${link.url}" target="_blank"
                        class="inline-flex items-center px-6 py-3 border-2 border-blue-400 text-blue-400 rounded-full hover:bg-blue-600 hover:text-white hover:border-blue-600 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl hover:scale-105">
                      <i class="fa-brands fa-github mr-3 text-lg"></i> View on GitHub
                    </a>`
                  : '')
              .join('');

        const imagesHTML = data.images && data.images.length > 0
          ? `<div class="modal-gallery">
               ${data.images.map((img, i) => 
                 `<img src="${img}" alt="${data.title} screenshot ${i + 1}" data-img-idx="${i}" class="cursor-pointer" />`
               ).join('')}
             </div>`
          : '';

        // Extract sections for modern layout
        function extractSection(html, section) {
          const regex = new RegExp(`<b>${section}<\\/b>\\s*([^<]*)`, 'i');
          const match = html.match(regex);
          return match ? match[1].trim() : '';
        }

        function extractFeatures(html) {
          const regex = /<b>Key Features:<\/b>([\s\S]*)/i;
          const match = html.match(regex);
          return match ? match[1].replace(/^\s*[:\-]?\s*/, '').trim() : '';
        }

        body.innerHTML = `
          <div class="space-y-8">
            <div class="text-center pb-6 border-b border-white/20">
              <h3 class="text-4xl font-extrabold mb-4 bg-gradient-to-r from-blue-300 to-blue-500 bg-clip-text text-transparent">${data.title}</h3>
              <div class="flex flex-wrap justify-center gap-3 mb-6">${techHTML}</div>
              <p class="text-white/90 text-lg leading-relaxed max-w-3xl mx-auto">${data.desc}</p>
            </div>
            
            ${imagesHTML}
            
            <div class="content-section space-y-6">
              <div class="grid gap-6">
                <div class="flex flex-col sm:flex-row gap-3">
                  <span class="font-bold text-blue-300 text-lg min-w-[120px] flex-shrink-0">Role:</span>
                  <span class="text-white/95 flex-1 leading-relaxed">${extractSection(data.longDesc, "Role:")}</span>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-3">
                  <span class="font-bold text-blue-300 text-lg min-w-[120px] flex-shrink-0">Problem:</span>
                  <span class="text-white/95 flex-1 leading-relaxed">${extractSection(data.longDesc, "Problem:")}</span>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-3">
                  <span class="font-bold text-blue-300 text-lg min-w-[120px] flex-shrink-0">Solution:</span>
                  <span class="text-white/95 flex-1 leading-relaxed">${extractSection(data.longDesc, "Solution:")}</span>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-3">
                  <span class="font-bold text-blue-300 text-lg min-w-[120px] flex-shrink-0">Features:</span>
                  <span class="text-white/95 flex-1 leading-relaxed">${extractFeatures(data.longDesc)}</span>
                </div>
              </div>
            </div>
            
            ${linksHTML ? `<div class="flex justify-center pt-6">${linksHTML}</div>` : ''}
          </div>
        `;

        // Attach click listeners to gallery images
        if (data.images && data.images.length > 0) {
          const imgs = body.querySelectorAll('.modal-gallery img');
          imgs.forEach((imgEl, i) => {
            imgEl.addEventListener('click', function(e) {
              e.stopPropagation();
              openImageViewer(data.images[i], i, data.images);
            });
          });
        }

        // Show modal with animation
        overlay.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        
        // Reset modal transform for animation
        modal.style.transform = "scale(0.9) translateY(50px)";
        modal.style.opacity = "0";
        
        setTimeout(() => {
          modal.style.transform = "scale(1) translateY(0)";
          modal.style.opacity = "1";
        }, 10);
      }

      // 3D Particle System for Galaxy Background
      (function() {
        const canvas = document.getElementById('galaxy-particles');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        let width = 0, height = 0, cx = 0, cy = 0;
        
        function resize() {
          width = window.innerWidth;
          height = window.innerHeight;
          canvas.width = width;
          canvas.height = height;
          cx = width / 2;
          cy = height / 2;
        }
        window.addEventListener('resize', resize);
        resize();
        
        // 3D Particle definition
        const PARTICLE_COUNT = 60;
        const particles = [];
        function randomBetween(a, b) { return a + Math.random() * (b - a); }
        
        function resetParticle(p) {
          const angle = randomBetween(0, 2 * Math.PI);
          const radius = randomBetween(0, Math.min(width, height) * 0.6);
          p.x = Math.cos(angle) * radius;
          p.y = Math.sin(angle) * radius;
          p.z = randomBetween(0.8, 1.5); // depth (1 = far, 0 = close)
          p.size = randomBetween(0.3, 1.2);
          p.opacity = randomBetween(0.1, 0.6);
          p.speed = randomBetween(0.0002, 0.0005);
          p.color = Math.random() < 0.3 ? '#8b5cf6' : 
                   (Math.random() < 0.5 ? '#4fc3f7' : 
                   (Math.random() < 0.7 ? '#ec4899' : '#fff'));
        }
        
        for (let i = 0; i < PARTICLE_COUNT; i++) {
          const p = {};
          resetParticle(p);
          particles.push(p);
        }
        
        function draw() {
          ctx.clearRect(0, 0, width, height);
          
          for (let p of particles) {
            p.z -= p.speed;
            if (p.z < 0.05) {
              resetParticle(p);
              continue;
            }
            
            // Perspective projection
            const perspective = 1 / p.z;
            const px = cx + p.x * perspective;
            const py = cy + p.y * perspective;
            const scale = (0.3 + (2 / p.z)) * p.size;
            
            ctx.globalAlpha = p.opacity * (1.5 - p.z);
            ctx.beginPath();
            ctx.arc(px, py, scale, 0, 2 * Math.PI);
            ctx.fillStyle = p.color;
            ctx.shadowColor = p.color;
            ctx.shadowBlur = 6 * (1.5 - p.z);
            ctx.fill();
            ctx.shadowBlur = 0;
          }
          ctx.globalAlpha = 1;
          requestAnimationFrame(draw);
        }
        draw();
      })();
    </script>
  </body>
</html> 